(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};window.Track=a=function(){function a(a){this.secondsToHms=b(this.secondsToHms,this),this.isPlaying=b(this.isPlaying,this),this.killTrack=b(this.killTrack,this),this.playPrevTrack=b(this.playPrevTrack,this),this.playNextTrack=b(this.playNextTrack,this),this.playPause=b(this.playPause,this),this.playTrack=b(this.playTrack,this);var c=this;this.track_id=a.track_id,this.artist=a.artist,this.title=a.title,this.duration=this.secondsToHms(a.duration),this.audio=soundManager.createSound({id:"current_track",url:"/stream/"+this.track_id,volume:75,onplay:function(){},onfinish:function(){return console.log("track finished, playing next track..."),c.playNextTrack()},whileplaying:function(){var a,b;return b=soundManager.getSoundById("current_track"),a=Math.round(b.position/1e3/60*100)/100,$(".current_time").html(a)}})}return a.prototype.playTrack=function(){var a,b;return this.audio.play(),b={artist:this.artist,title:this.title,duration:Math.round(this.duration/1e3/60*100)/100},a=ich.nowplaying(b),console.log(a),$(".now-playing").html(a).slideDown(500,function(){return console.log("slid")})},a.prototype.playPause=function(){return this.audio.togglePause(),$(".pause-track i").toggleClass("icon-pause"),$(".pause-track i").toggleClass("icon-play")},a.prototype.playNextTrack=function(){var a,b,c=this;return a=$(".results li").find('[data-id="'+this.track_id+'"]'),b=$(a).parent().next().find("a"),this.track_id=$(b).attr("data-id"),this.title=$(b).attr("data-title"),this.artist=$(b).attr("data-artist"),this.duration=this.secondsToHms($(b).attr("data-duration")),this.killTrack(),this.audio=soundManager.createSound({id:"current_track",url:"/stream/"+this.track_id,volume:75,onfinish:function(){return c.playNextTrack()},whileplaying:function(){return setTimeout(function(){var a,b;return b=soundManager.getSoundById("current_track"),a=Math.round(b.position/1e3/60*100)/100,$(".current_time").html(a)},1e3)}}),this.playTrack()},a.prototype.playPrevTrack=function(){var a,b,c=this;return a=$(".results li").find('[data-id="'+this.track_id+'"]'),b=$(a).parent().prev().find("a"),this.track_id=$(b).attr("data-id"),this.title=$(b).attr("data-title"),this.artist=$(b).attr("data-artist"),this.duration=this.secondsToHms($(b).attr("data-duration")),this.killTrack(),this.audio=soundManager.createSound({id:"current_track",url:"/stream/"+this.track_id,volume:75,onfinish:function(){return c.playNextTrack()},whileplaying:function(){return setTimeout(function(){var a,b;return b=soundManager.getSoundById("current_track"),a=Math.round(b.position/1e3/60*100)/100,$(".current_time").html(a)},1e3)}}),this.playTrack()},a.prototype.killTrack=function(){return this.audio.destruct()},a.prototype.isPlaying=function(){return this.audio.playState!==1?!1:!0},a.prototype.secondsToHms=function(a){var b,c,d,e,f,g,h;return a=Number(a),b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%3600%60),((e=b>0)!=null?e:b+{":":""})+((f=c>0)!=null?f:((g=b>0&&c<10)!=null?g:{0:""})+c+{":":"0:"})+((h=d<10)!=null?h:{0:""})+d},a}()}).call(this)